---
interface Technology {
    id: string;
    name: string;
    category: string;
    color?: string | null;
    icon_slug?: string | null;
}
interface Props {
    technologies: Technology[];
}
const { technologies } = Astro.props;

const groupedTech =
    technologies?.reduce((acc, tech) => {
        const cat = tech.category || "Other";
        if (!acc[cat]) acc[cat] = [];
        acc[cat].push(tech);
        return acc;
    }, {} as Record<string, Technology[]>) || {};
---

<div class="flex flex-col gap-10 reveal-hidden">
    {
        Object.entries(groupedTech).map(([category, techs]) => (
            <div class="flex flex-col gap-4">
                <p
                    class="font-mono text-xs tracking-widest"
                    style="color: var(--text-muted); border-bottom: 1px solid var(--border-subtle); padding-bottom: 0.5rem;"
                >
                    {category}
                </p>
                <div class="flex flex-wrap gap-3 md:gap-2">
                    {techs.map((tech) => (
                        <span
                            class="font-mono text-xs px-4 py-2 md:px-3 md:py-1.5 transition-all duration-200 hover:text-(--text-primary) hover:border-(--text-secondary)"
                            style="color: var(--text-secondary); border: 1px solid var(--border-default);"
                        >
                            {tech.name}
                        </span>
                    ))}
                </div>
            </div>
        ))
    }
</div>
